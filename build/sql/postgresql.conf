max_connections = 30
listen_addresses = 'main,auth,note,localhost,127.0.0.1'
statement_timeout = '2s'
lock_timeout = '1s'

# Логгирование медленных запросов
log_min_duration_statement = 1000
log_statement = 'all'
log_duration = on

# Настройка pg_stat_statements
shared_preload_libraries = 'pg_stat_statements'
pg_stat_statements.max = 10000
pg_stat_statements.track = all
pg_stat_statements.track_utility = on

# Настройка auto_explain
shared_preload_libraries = 'auto_explain'
auto_explain.log_min_duration = '1s'
auto_explain.log_analyze = true
auto_explain.log_verbose = true
auto_explain.log_buffers = true
auto_explain.log_timing = true
auto_explain.log_triggers = true
auto_explain.log_format = 'json'
